L    := [] | M :: L
M, N := n | x | λ x M | M N | Add M N | Sub M N | Mul M N | HD M | TL N |
          | ifz M N O | ifn M N O | fix M
V    := n | x | λ x M | x V | L |

n, m in Nat

-------------------------------------------------------------------------------
-- Inferences -----------------------------------------------------------------
-------------------------------------------------------------------------------

---- Lambda -------------------------------------------------------------------

--------------------- (Beta)
 (λx.M) V −> M[V /x]

   M -> M'                   N -> N'
------------- (App_l)     ------------- (App_r)
 M N −> M' N               M N −> M N'

---- Nat ----------------------------------------------------------------------

-------------- (Add_0_l)     -------------- (Add_0_r)
 Add 0 n -> n                 Add n 0 -> n

      n != 0
------------------ (Add)
 Add m n -> m + n

-------------- (Sub_0_l)     -------------- (Sub_0_r)
 Sub 0 n -> n                 Sub n 0 -> n

      n != 0
------------------ (Sub)
 Add m n -> m - n

-------------- (Mul_0_l)     -------------- (Mul_0_r)
 Mul 0 n -> 0                 Mul m 0 -> 0

       M -> M'                           N -> N'
--------------------- (Add_M)     --------------------- (Add_N)
 Add M N -> Add M' N               Add M N -> Add M N'

              m != 0
---------------------------------- (Mul_n_l)
 Mul m n -> Add m (Mul (m - 1) n)

       M -> M'                           N -> N'
--------------------- (Add_M)     --------------------- (Add_N)
 Mul M N -> Mul M' N               Mul M N -> Mul M N'

---- List ---------------------------------------------------------------------

------------------- (Head)     ------------------ (Tail)
 HD (M :: L) -> M               TL (M :: L) -> L

---- Conditions ---------------------------------------------------------------

         M -> M'
------------------------- (ifz_red)
 Ifz M N O -> Ifz M' N O

      n = 0                          n != 0
---------------- (ifz_true)     ---------------- (ifz_false)
 Ifz n M N -> M                  Ifz n M N -> M

         M -> M'
------------------------- (ifn_red)
 ifn M N O -> ifn M' N O

     L = []                          L != []
---------------- (ifn_true)     ---------------- (ifn_false)
 ifn L M N -> M                  ifn n M N -> M


---- Fixpoint -----------------------------------------------------------------


------------------------------- (fix)
 fix (λx.M) -> M[(fix(λx.M))/x]


---- Let ----------------------------------------------------------------------

              N -> N'
----------------------------------- (let_red)
 let M = N in O -> let M = N' in O

-------------------------- (let_sub)
 let x = V in M -> M[V/x]


-------------------------------------------------------------------------------
-- Typing ---------------------------------------------------------------------
-------------------------------------------------------------------------------

------------- (int)
   n : Nat

------------------ (Var) 
 Γ, x : T ⊢ x : T

 Γ ⊢ M : Nat   Γ ⊢ N : Nat              Γ ⊢ M : Nat   Γ ⊢ N : Nat
--------------------------- (Add)     --------------------------- (Mul)
        Add M N : N                            Mul M N : N

  Γ, x : T ⊢ M : S              Γ ⊢ M : S −> T   Γ ⊢ N : S
-------------------- (Abs)     ---------------------------- (App)
 Γ ⊢ λ x M : T −> S                     Γ ⊢ M N : T

                          Γ ⊢ N : T   Γ ⊢ L : [T]
-------------- (Nil)     ------------------------- (Cons)
 Γ ⊢ [] : [T]                Γ ⊢ N :: L : [T]

 Γ ⊢ L : [T]                Γ ⊢ L : [T]
-------------- (Head)     ---------------- (Tail)
 Γ ⊢ HD L : T              Γ ⊢ TL L : [T]

 Γ ⊢ M : Nat   Γ ⊢ N : T   Γ ⊢ O : T
------------------------------------- (ifn)
         Γ ⊢ ifn M N O : T

 Γ ⊢ M : Lis   Γ ⊢ N : T   Γ ⊢ O : T
------------------------------------- (ifz)
         Γ ⊢ ifz M N O : T

 Γ, x : T -> U ⊢ M : T -> U
---------------------------- (fix)
  Γ ⊢ fix (λx.M) : T -> U

